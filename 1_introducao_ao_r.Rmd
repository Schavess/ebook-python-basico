# Introdu√ß√£o ao R

Como mostrado em [@r4ds], o R facilita a an√°lise de dados.


## Instala√ß√£o do R
A instala√ß√£o padr√£o do R √© feita a partir do CRAN, uma rede de servidores espalhada pelo mundo que armazena vers√µes id√™nticas e atualizadas de c√≥digos e documenta√ß√µes para o R.

Para instalar o R no Windows, siga os seguintes passos:

1. Acesse o CRAN: https://www.r-project.org/

2. No menu √† esquerda, encontre a op√ß√£o **Download** e clique em **CRAN**.

3. Escolha a op√ß√£o de servidor (mirror) mais pr√≥xima de voc√™.

4. Clique em **Download R for Windows**.

5. Clique na op√ß√£o **base**.

6. Na nova p√°gina, clique em Download R x.x.x for Windows, sendo x.x.x o n√∫mero da vers√£o que ser√° baixada. Se voc√™ teve algum problema com o download, tente escolher outro servidor no passo 3.

7. Feito o download, clique duas vezes no arquivo baixado e siga as instru√ß√µes para instala√ß√£o.

## Instala√ß√£o do RStudio

Para instalar o RStudio, siga os passos atualizados abaixo:

Acesse a p√°gina de downloads do RStudio:

Visite https://posit.co/download/rstudio-desktop/#download.
Verifique os requisitos do sistema:

Certifique-se de que seu sistema operacional √© compat√≠vel:
Windows: Windows 10 ou superior (64 bits).
macOS: macOS 11 (Big Sur) ou superior.
Linux: Distribui√ß√µes compat√≠veis incluem Debian 10, Ubuntu 18.04 LTS, Ubuntu 20.04 LTS, Ubuntu 22.04 LTS, Debian 9, RHEL/CentOS 7, RHEL 8 e OpenSUSE/SLES 15.
Baixe o instalador adequado:

Na se√ß√£o "All Installers", selecione o instalador correspondente ao seu sistema operacional.
Instale o RStudio:

### Windows:
Execute o arquivo .exe baixado e siga as instru√ß√µes do assistente de instala√ß√£o.

### macOS:
Abra o arquivo .dmg baixado, arraste o √≠cone do RStudio para a pasta "Aplicativos" e, em seguida, ejete a imagem de disco.

### Linux:
Baixe o pacote apropriado (.deb ou .rpm) e instale-o usando as ferramentas de gerenciamento de pacotes do seu sistema.
Inicie o RStudio:

Ap√≥s a instala√ß√£o, abra o RStudio para come√ßar a utiliz√°-lo.
Lembre-se de que o RStudio requer o R instalado previamente. Certifique-se de ter o R instalado antes de prosseguir com a instala√ß√£o do RStudio.

## Sobre o R

### O que s√£o algoritmos?

**Objetivo do Algoritmo**: Plantar uma √°rvore.

**Entradas do Algoritmo**:

* Uma muda de √°rvore.
* Local de plantio escolhido.
* Ferramentas para cavar (como uma p√°).
* √Ågua para regar a muda.

**Passos do Algoritmo**:

1. Selecionar o Local: Escolher um local adequado para plantar a muda, considerando a exposi√ß√£o solar, o tipo de solo e o espa√ßo necess√°rio para o crescimento da √°rvore.

2. Cavar um Buraco: Usar a p√° para cavar um buraco no local escolhido. O buraco deve ter profundidade e largura suficientes para acomodar as ra√≠zes da muda.

3. Preparar a Muda: Remover a muda do recipiente em que veio, com cuidado para n√£o danificar as ra√≠zes.

4. Plantar a Muda: Colocar a muda no buraco, ajustando a profundidade para que a base do tronco fique no n√≠vel do solo. Preencher o buraco com terra, firmemente, mas sem compactar excessivamente.

5. Regar a Muda: Regar a muda generosamente para umedecer o solo e ajudar a estabelecer as ra√≠zes.

6. Cuidados Posteriores: Incluir instru√ß√µes b√°sicas de cuidados posteriores, como rega regular, aplica√ß√£o de mulch para manter a umidade, e prote√ß√£o contra ervas daninhas.

**Sa√≠da do Algoritmo**:

Uma √°rvore plantada e pronta para crescer no local escolhido.

### O que √© uma linguagem de programa√ß√£o?

Uma linguagem de programa√ß√£o √© uma forma padronizada de comunicar instru√ß√µes a um computador. √â como uma l√≠ngua que permite aos programadores escreverem c√≥digos que s√£o convertidos em a√ß√µes execut√°veis pelo computador, permitindo a cria√ß√£o de software, aplicativos, websites, e muito mais. Cada linguagem de programa√ß√£o tem sua pr√≥pria sintaxe e regras, assim como as l√≠nguas humanas t√™m gram√°tica e vocabul√°rio.

### R üìä  
**R** √© uma linguagem de programa√ß√£o voltada para an√°lise estat√≠stica e visualiza√ß√£o de dados.  
Ela permite:  
- Manipula√ß√£o de grandes volumes de dados üìÇ  
- Cria√ß√£o de gr√°ficos avan√ßados üìà  
- Modelagem estat√≠stica complexa üî¢  

Com uma vasta comunidade e milhares de pacotes dispon√≠veis, **R** √© ideal tanto para iniciantes quanto para especialistas em ci√™ncia de dados.  

**Alto N√≠vel:**  
R √© uma linguagem de programa√ß√£o de alto n√≠vel projetada para abstrair detalhes t√©cnicos e permitir que os usu√°rios se concentrem na an√°lise de dados e estat√≠sticas. Ela automatiza tarefas como aloca√ß√£o de mem√≥ria e manipula√ß√£o de estruturas complexas, permitindo maior foco nos problemas anal√≠ticos e menos em detalhes de implementa√ß√£o.  

**Foco em An√°lise de Dados:**  
Diferentemente de linguagens de prop√≥sito geral, R √© especialmente projetada para an√°lise estat√≠stica, ci√™ncia de dados e visualiza√ß√£o. √â amplamente usada em √°reas como bioestat√≠stica, econometria, aprendizado de m√°quina e pesquisa acad√™mica, fornecendo ferramentas especializadas para cada etapa do fluxo de trabalho anal√≠tico.  

**Visualiza√ß√µes Avan√ßadas:**  
R √© reconhecida por sua capacidade de criar gr√°ficos e visualiza√ß√µes de dados de alta qualidade, tanto para an√°lises explorat√≥rias quanto para apresenta√ß√µes profissionais. Com pacotes como `ggplot2` e `plotly`, √© poss√≠vel produzir desde gr√°ficos b√°sicos at√© visualiza√ß√µes interativas complexas.  

**Tipagem Din√¢mica e Flexibilidade:**  
R utiliza tipagem din√¢mica, onde o tipo das vari√°veis √© determinado em tempo de execu√ß√£o. Isso oferece flexibilidade para manipular diferentes tipos de dados, mas requer aten√ß√£o para evitar inconsist√™ncias. Al√©m disso, sua sintaxe foi projetada para facilitar opera√ß√µes vetoriais e manipula√ß√£o de dados em larga escala, tornando-a eficiente em tarefas anal√≠ticas.  

## Fundamentos da linguagem

### Boas pr√°ticas de codaR 

O manual de refer√™ncias de boas pr√°ticas: [@tidyverse_style_guide]

Construir...

### ?D√∫vidas

```{r, eval=FALSE}
?mean
# ou
help(mean)
```

### Tipos de dados
| Tipo         | Descri√ß√£o                           | Exemplo                        |
| ------------ | ----------------------------------- | ------------------------------ |
| `numeric`    | N√∫meros, incluindo inteiros e reais | `10`, `10.5`                   |
| `integer`    | N√∫meros inteiros                    | `as.integer(10)`               |
| `character`  | Cadeias de caracteres (texto)       | `"Ol√°"`                        |
| `logical`    | Valores booleanos                   | `TRUE`, `FALSE`                |
| `complex`    | N√∫meros complexos                   | `1+2i`                         |
| `factor`     | Vari√°veis categ√≥ricas               | `factor(c("A", "B", "A"))`     |
| `list`       | Lista de elementos heterog√™neos     | `list(1, "a", TRUE)`           |
| `data.frame` | Tabela de dados estruturados        | `data.frame(x = 1:3, y = 4:6)` |
| `matrix`     | Tabela de dados bidimensional       | `matrix(1:6, nrow = 2)`        |
| `array`      | Dados com mais de duas dimens√µes    | `array(1:8, dim = c(2, 2, 2))` |
| `NULL`       | Representa a aus√™ncia de valor      | `NULL`                         |
| `NA`         | Valor ausente ou indefinido         | `NA`                           |

### Operadores
| Categoria     | Operador       | Descri√ß√£o                    | Exemplo                  |
| ------------- | -------------- | ---------------------------- | ------------------------ |
| Aritm√©tico    | `+`            | Adi√ß√£o                       | `x + y`                  |
|               | `-`            | Subtra√ß√£o                    | `x - y`                  |
|               | `*`            | Multiplica√ß√£o                | `x * y`                  |
|               | `/`            | Divis√£o                      | `x / y`                  |
|               | `^`            | Exponencia√ß√£o                | `x ^ y`                  |
|               | `%%`           | M√≥dulo (resto da divis√£o)    | `x %% y`                 |
|               | `%/%`          | Divis√£o inteira              | `x %/% y`                |
| Compara√ß√£o    | `==`           | Igual a                      | `x == y`                 |
|               | `!=`           | Diferente de                 | `x != y`                 |
|               | `>`            | Maior que                    | `x > y`                  |
|               | `<`            | Menor que                    | `x < y`                  |
|               | `>=`           | Maior ou igual a             | `x >= y`                 |
|               | `<=`           | Menor ou igual a             | `x <= y`                 |
| L√≥gico        | `&`            | AND elemento por elemento    | `x & y`                  |
|               | `              | `                            | OR elemento por elemento | `x                          | y` |
|               | `&&`           | AND para o primeiro elemento | `x && y`                 |
|               | `              |                              | `                        | OR para o primeiro elemento | `x |  | y` |
|               | `!`            | NOT l√≥gico                   | `!x`                     |
| Atribui√ß√£o    | `<-`           | Atribui um valor             | `x <- y`                 |
|               | `->`           | Atribui um valor             | `y -> x`                 |
|               | `=`            | Atribui um valor             | `x = y`                  |
| Pertencimento | `%in%`         | Pertencimento (cont√©m)       | `x %in% y`               |
| Bit a bit     | `bitwAnd()`    | AND bit a bit                | `bitwAnd(x, y)`          |
|               | `bitwOr()`     | OR bit a bit                 | `bitwOr(x, y)`           |
|               | `bitwXor()`    | XOR bit a bit                | `bitwXor(x, y)`          |
|               | `bitwNot()`    | NOT bit a bit                | `bitwNot(x)`             |
|               | `bitwShiftL()` | Deslocamento √† esquerda      | `bitwShiftL(x, n)`       |
|               | `bitwShiftR()` | Deslocamento √† direita       | `bitwShiftR(x, n)`       |

### Convers√£o de tipos
| Fun√ß√£o            | Descri√ß√£o                               | Exemplo                              | Resultado           |
| ----------------- | --------------------------------------- | ------------------------------------ | ------------------- |
| `as.numeric()`    | Converte para tipo num√©rico             | `as.numeric("10.5")`                 | `10.5` (numeric)    |
| `as.integer()`    | Converte para inteiro                   | `as.integer(10.5)`                   | `10` (integer)      |
| `as.character()`  | Converte para texto (character)         | `as.character(10)`                   | `"10"` (character)  |
| `as.logical()`    | Converte para l√≥gico (booleano)         | `as.logical(1)`                      | `TRUE` (logical)    |
|                   |                                         | `as.logical(0)`                      | `FALSE` (logical)   |
| `as.complex()`    | Converte para n√∫mero complexo           | `as.complex(10)`                     | `10+0i` (complex)   |
| `as.factor()`     | Converte para fator (categorias)        | `as.factor(c("A", "B"))`             | `Factor` com n√≠veis |
| `as.list()`       | Converte para lista                     | `as.list(c(1, 2, 3))`                | `list(1, 2, 3)`     |
| `as.matrix()`     | Converte para matriz                    | `as.matrix(c(1, 2, 3))`              | `matrix` (2D)       |
| `as.data.frame()` | Converte para data frame                | `as.data.frame(matrix(1:4, ncol=2))` | `data.frame`        |
| `as.Date()`       | Converte para data (classe Date)        | `as.Date("2024-11-18")`              | `2024-11-18` (Date) |
| `as.POSIXct()`    | Converte para data/hora                 | `as.POSIXct("2024-11-18 10:00:00")`  | Data/hora (POSIXct) |
| `as.vector()`     | Converte para vetor                     | `as.vector(matrix(1:4, nrow=2))`     | `c(1, 2, 3, 4)`     |
| `as.array()`      | Converte para array (multi-dimensional) | `as.array(1:8)`                      | `array`             |
| `is.numeric()`    | Testa se √© num√©rico                     | `is.numeric(10.5)`                   | `TRUE`              |
| `is.character()`  | Testa se √© texto                        | `is.character("text")`               | `TRUE`              |
| `is.logical()`    | Testa se √© l√≥gico                       | `is.logical(TRUE)`                   | `TRUE`              |
| `is.factor()`     | Testa se √© fator                        | `is.factor(as.factor("A"))`          | `TRUE`              |


## Gerenciamento de pacotes

## Importa√ß√£o e exporta√ß√£o da dados

## Pipe (`%>%`) do dplyr

### O que √© o `%>%`?
O operador `%>%` √© chamado de pipe.
Ele permite encadear fun√ß√µes de maneira a facilitar a leitura e compreens√£o do c√≥digo.
Ao inv√©s de ficar atribuindo valores intermedi√°rios ou aninhando v√°rias fun√ß√µes, voc√™ simplesmente passa o resultado de uma fun√ß√£o como entrada para a pr√≥xima.

### Exemplos de Uso
Vamos usar o conjunto de dados mtcars para entender como o pipe facilita a manipula√ß√£o de dados:

Sem `%>%` (Sem Pipe)
Imagine que queremos fazer as seguintes opera√ß√µes no dataset mtcars:

Filtrar apenas os carros que t√™m mais de 20 milhas por gal√£o (mpg > 20).
Selecionar apenas as colunas mpg, cyl, e hp.
Sem o operador `%>%`, o c√≥digo ficaria assim:

```{r}
library(dplyr)

# Sem pipe
filtered_data <- filter(mtcars, mpg > 20)
selected_data <- select(filtered_data, mpg, cyl, hp)
```
<br>
Com `%>%` (Com Pipe)
Podemos simplificar isso usando o pipe:

```{r}
library(dplyr)

# Usando pipe
selected_data <- mtcars %>%
  filter(mpg > 20) %>%
  select(mpg, cyl, hp)
```

```{r, echo=FALSE, message=FALSE, warning=FALSE}
library(kableExtra)

head(selected_data) %>%
  knitr::kable() %>%
  kableExtra::kable_styling(full_width = FALSE, bootstrap_options = c("striped", "hover"))
```
<br>
Note como o c√≥digo com `%>%` √© mais leg√≠vel e direto. Ele segue uma l√≥gica sequencial que permite facilmente entender o que est√° sendo feito em cada etapa.

## data.table

### O que √© o `:=`?
O operador `:=` √© chamado de operador de atribui√ß√£o por refer√™ncia.
Ele pertence ao pacote data.table e √© usado para adicionar ou modificar colunas em um data.table.
O `:=` √© mais eficiente do que usar `<-` em um data.table, pois faz as modifica√ß√µes "por refer√™ncia", o que significa que n√£o cria c√≥pias desnecess√°rias dos dados, sendo muito mais r√°pido e eficiente em termos de mem√≥ria.

### Exemplos de Uso
Vamos usar o pacote data.table para entender como o `:=`
 funciona.

Primeiro, vamos criar um data.table com alguns dados fict√≠cios:
```{r}
library(data.table)

# Cria√ß√£o de um data.table
DT <- data.table(
  id = 1:5,
  valor = c(10, 15, 20, 25, 30)
)

```
Adicionando uma Nova Coluna com `:=`

Podemos adicionar uma nova coluna chamada valor_2 que seja o dobro do valor existente na coluna valor:
```{r}
DT[, valor_2 := valor * 2]

print(DT)

```
<br>

Modificando uma Coluna Existente com `:=`

Podemos tamb√©m modificar uma coluna existente. Vamos modificar a coluna valor_2 para ser o triplo do valor da coluna valor:
```{r}
DT[, valor_2 := valor * 3]

print(DT)
```

## Manipula√ß√£o de dados
